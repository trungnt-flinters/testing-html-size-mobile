var YoutubeIframe=function(a){this.url=a,this.videoImgs=$("img[data-video='youtube']"),this.insertIframe()};YoutubeIframe.prototype.insertIframe=function(){$.each(this.videoImgs,function(){var a=$(this).attr("data-id"),e=$(this).attr("width"),t=$(this).attr("style"),r=$(this).attr("height"),i=$(this).attr("data-gaevent-label"),n=$(this).attr("data-gaevent-category"),d=$(this).attr("data-gaevent-value"),o=$("<iframe />"),s=0;"1"===$(this).attr("data-rel")&&(s=1);var l="https://www.youtube.com/embed/"+a+"?enablejsapi=1&rel="+s;o.attr({width:e,height:r,data_id:a,"data-gaevent-label":i,"data-gaevent-category":n,"data-gaevent-value":d,frameborder:0,src:l,allowfullscreen:"",class:"yt-iframe",style:void 0!==t?t:""}),o.css("max-width","100%"),$(this).before('<div class="yt-iframe-container" id="'+a+'"></div>'),$("#"+a).html(o),$(this).remove()})};var ytListenners=[],iframeY={},categoryVideo="video",tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];function onYouTubeIframeAPIReady(a){for(var e=document.getElementsByTagName("iframe"),t=e.length;t--;)if(/youtube.com\/embed/.test(e[t].src)){e[t].pauseFlag=!1,e[t].played=!1;var r=$(e[t]).attr("data_id");iframeY[r]=e[t],ytListenners.push(new YT.Player(e[t],{events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}}))}}function onPlayerReady(a){}function onPlayerStateChange(a){var e=a.target.getVideoData(),t=$(iframeY[e.video_id]),r=iframeY[e.video_id].pauseFlag,i=iframeY[e.video_id].played,n=null!==t.attr("data-gaevent-label")?t.attr("data-gaevent-label"):e.video_id,d=null!==t.attr("data-gaevent-category")?t.attr("data-gaevent-category"):categoryVideo,o=null!==t.attr("data-gaevent-value")?t.attr("data-gaevent-value"):1;a.data===YT.PlayerState.PLAYING&&(i||(0<account.length&&account.forEach(function(a,e){var t="gaInfo"+e;ga("create",a,{name:t}),ga(t+".send","event",d,"Play",n,o)}),iframeY[e.video_id].played=!0),iframeY[e.video_id].pauseFlag=!0),a.data===YT.PlayerState.PAUSED&&r&&(iframeY[e.video_id].pauseFlag=!1),a.data===YT.PlayerState.ENDED&&0<account.length&&account.forEach(function(a,e){var t="gaInfo"+e;ga("create",a,{name:t}),ga(t+".send","event",d,"Finished",n,o)})}firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);